<?xml version="1.0" encoding="UTF-8" ?>
<otrs_config version="1.0" init="Config">
    <ConfigItem Name="Frontend::Module###AgentTicketTH" Required="1" Valid="1">
        <Description Lang="en">FrontendModuleRegistration for the TicketTH module.</Description>
        <Group>TH</Group>
        <SubGroup>Frontend::Agent::ModuleRegistration</SubGroup>
        <Setting>
            <FrontendModuleReg>
                <Title>TicketTH</Title>
                <Description>TicketTH</Description>
                <NavBarName>TicketTH</NavBarName>
            </FrontendModuleReg>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Ticket::Frontend::MenuModule###900-TH" Required="0" Valid="1">
        <Description Lang="en">Module to shows a TH-link in menu of the ticket zoom.</Description>
        <Group>TH</Group>
        <SubGroup>Frontend::Agent::Ticket::MenuModule</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::Output::HTML::TicketMenu::TH</Item>
                <Item Key="Name">TH</Item>
                <Item Key="Action">AgentTicketTH</Item>
                <Item Key="Target"></Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###URL" Required="1" Valid="1">
        <Description Lang="en">The URL of the TH API server, include the protocol and the port if required a well as the base if any.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">http://thehive:9000</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###Path" Required="1" Valid="1">
        <Description Lang="en">The path of the REST API.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">/api/alert</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###APIkey" Required="1" Valid="1">
        <Description Lang="en">The TH API key.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">***API*KEY***</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###IncomingUser" Required="1" Valid="1">
        <Description Lang="en">The username that is used when TH logs into OTRS to update tickets.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">TH</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###WorkflowCloseActionName" Required="1" Valid="1">
        <Description Lang="en">The name of the close issue workflow action (default: "Close Issue", pay attention to the TH language of user in TicketTH###User, English(UK) works).</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String>Close Issue</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###OTRSTicketAllowedStates4Create" Required="1" Valid="1">
        <Description Lang="en">The names of the OTRS Ticket states that allow the creation of a TH Issue.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String>new,open,merged,pending reminder</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###OTRSTicketAllowedStates4Update" Required="1" Valid="1">
        <Description Lang="en">The names of the OTRS Ticket states that allow updating the TH Issue.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String>new,open,merged,pending reminder</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Ticket::EventModulePost###001-TicketCreateTH" Required="0" Valid="1">
        <Description Lang="en">Create TH Issue once the ticket is pushed into a specific state. See TicketTH###OTRSTicketAllowedStates4Create for details.</Description>
        <Group>TH</Group>
        <SubGroup>Core::Ticket</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::System::Ticket::Event::CreateTHIssue</Item>
                <Item Key="Event">TicketStateUpdate</Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Ticket::EventModulePost###001-TicketTHUpdate" Required="0" Valid="1">
        <Description Lang="en">Update TH once the ticket updated the title field. Duplicate this entry for *all* fields you want to sync into TH.</Description>
        <Group>TH</Group>
        <SubGroup>Core::Ticket</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::System::Ticket::Event::UpdateTHIssue</Item>
                <Item Key="Event">TicketTitleUpdate|TicketCustomerUpdate|TicketFreeTextUpdate|TicketOwnerUpdate|TicketDynamicFieldUpdate_field001|TicketDynamicFieldUpdate_field002|TicketDynamicFieldUpdate_field003|TicketDynamicFieldUpdate_field004|TicketDynamicFieldUpdate_field005|TicketDynamicFieldUpdate_field010|TicketDynamicFieldUpdate_field011</Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###CaseTemplate" Required="1" Valid="1">
        <Description Lang="en">The name of the case template to use for the new TH issues.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">OTRS</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TicketTH###OTRS-TH-FieldMapping" Required="1" Valid="1">
        <Description Lang="en">Mapping from OTRS fields to TH Fields. Key: OTRS; Content: TH. Prefixes: "std:" = standard field; "dyn:" = OTRS dynamic field; "cust:" = TH custom field; "call:" = OTRS/TH mapping call with full Perl modulepath Pkg::Sub,func (e.g. MIME::Base64,encode_base64).</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <Hash>
                <Item Key="dyn:dynamicField1">cust:customField1</Item>
                <Item Key="dyn:TH_prio">std:priority</Item>
                <Item Key="std:Title">std:summary</Item>
                <Item Key="std:Queue">cust:queue</Item>
                <Item Key="map:Mod::SubMod::func">cust:field1</Item>
                <Item Key="dyn:dynamicField2">map:Mod::SubMod,func2</Item>
                <Item Key="map:Mod::SubMod::func3">map:Mod::SubMod,func4</Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::OTRSTicketIDField" Required="1" Valid="1">
        <Description Lang="en">The ID of the custom field in TH that stores the OTRS ticket ID.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">10000</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::CacheTTL" Required="1" Valid="1">
        <Description Lang="en">TimeToLive for Cache.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">20000</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::SSLVerify" Required="1" Valid="1">
        <Description Lang="en">Verify hostname for SSL connections.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <Option SelectedID="1">
                <Item Key="0" Translatable="1">No</Item>
                <Item Key="1" Translatable="1">Yes</Item>
            </Option>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::Debug" Required="1" Valid="1">
        <Description Lang="en">Enables Debugging for TH package.</Description>
        <Group>TH</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <Option SelectedID="0">
                <Item Key="0" Translatable="1">No</Item>
                <Item Key="1" Translatable="1">Yes</Item>
            </Option>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::ShowDialog" Required="0" Valid="1">
        <Description Translatable="1">Show dialog when issue in TH is about to be created.</Description>
        <Group>TH</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <Option SelectedID="0">
                <Item Key="0" Translatable="1">No</Item>
                <Item Key="1" Translatable="1">Yes</Item>
            </Option>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::TransferTicketHistory" Required="0" Valid="1">
        <Description Translatable="1">If set to 'only first article', only the first article is sent to TH on issue creation. If set to 'all articles', all existing articles will be sent to TH.</Description>
        <Group>TH</Group>
        <SubGroup>Core</SubGroup>
        <Setting>
            <Option SelectedID="0">
                <Item Key="0" Translatable="1">only first article</Item>
                <Item Key="1" Translatable="1">all articles</Item>
            </Option>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::ShowCase" Required="0" Valid="1">
        <Description Translatable="1">Show Case field in create dialog.</Description>
        <Group>TH</Group>
        <SubGroup>CreateIssue</SubGroup>
        <Setting>
            <Option SelectedID="1">
                <Item Key="-1" Translatable="1">Hide</Item>
                <Item Key="0" Translatable="1">Readonly</Item>
                <Item Key="1" Translatable="1">Editable</Item>
            </Option>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Frontend::Module###AgentTicketTHDialog" Required="1" Valid="1">
        <Description Lang="en">FrontendModuleRegistration for the TicketTH dialog module.</Description>
        <Group>TH</Group>
        <SubGroup>Frontend::Agent::ModuleRegistration</SubGroup>
        <Setting>
            <FrontendModuleReg>
                <Title>TicketTH</Title>
                <Description>TicketTH</Description>
                <NavBarName>TicketTH</NavBarName>
                <Loader>
                    <JavaScript>TH.Autocomplete.js</JavaScript>
                </Loader>
            </FrontendModuleReg>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Frontend::Output::FilterElementPost###OutputFilterArticleMenuOTRSToTHLink" Required="0" Valid="1">
        <Description Translatable="1">Add a link in the article menu to create issue in TH for the article.</Description>
        <Group>TH</Group>
        <SubGroup>OutputFilter</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::Output::HTML::FilterElementPost::OTRSToTHLink</Item>
                <Item Key="Templates">
                    <Hash>
                        <Item Key="AgentTicketZoom">1</Item>
                    </Hash>
                </Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::CaseWhitelist" Required="0" Valid="0">
        <Description Translatable="1">Here you can define a list of regular expressions. Only Case keys that matches at least one of those regular expressions are shown in the Case dropdown (TH dialog).</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <Array>
            </Array>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::CaseBlacklist" Required="0" Valid="0">
        <Description Translatable="1">Here you can define a list of regular expressions. Case keys that matches at least one of those regular expressions are excluded from the Case dropdown (TH dialog).</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <Array>
            </Array>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::IssueSearchMaxResults" Required="1" Valid="1">
        <Description Translatable="1">Maximum number of issues shown in the autocomplete dropdown.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <String Regex="">300</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::IssueSearchStates" Required="0" Valid="0">
        <Description Lang="en">Here you can define a list of states to restrict the issues that are searched for.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <Array>
            </Array>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Ticket::EventModulePost###101-SendAttachments" Required="0" Valid="1">
        <Description Translatable="1">Send attachments to TH.</Description>
        <Group>TH</Group>
        <SubGroup>Core::Ticket</SubGroup>
        <Setting>
            <Hash>
                <Item Key="Module">Kernel::System::Ticket::Event::SendAttachmentsToTHIssue</Item>
                <Item Key="Event">AttachmentWrite</Item>
            </Hash>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Ticket::CustomModule###005-AttachmentEvents" Required="0" Valid="1">
        <Description Translatable="1">Overrides and some methods with regards to attachments.</Description>
        <Group>TH</Group>
        <SubGroup>Core::Ticket</SubGroup>
        <Setting>
            <String Regex="">Kernel::System::Ticket::Custom::AttachmentEvents</String>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Frontend::Module###AdminTHWizard" Required="0" Valid="1">
        <Description Translatable="1">Wizard for basic TH settings.</Description>
        <Group>TH</Group>
        <SubGroup>Frontend::Admin::ModuleRegistration</SubGroup>
        <Setting>
            <FrontendModuleReg>
                <Group>admin</Group>
                <Description Translatable="1">Basic settings for TH.</Description>
                <Title Translatable="1">TH</Title>
                <NavBarName>Admin</NavBarName>
                <NavBarModule>
                    <Module>Kernel::Output::HTML::NavBar::ModuleAdmin</Module>
                    <Name Translatable="1">TH</Name>
                    <Description Translatable="1">Basic settings for TH.</Description>
                    <Block>System</Block>
                    <Prio>99102</Prio>
                </NavBarModule>
                <Loader>
                    <JavaScript>TH.AdminWizard.js</JavaScript>
                </Loader>
            </FrontendModuleReg>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="TH::ArticleFormat" Required="0" Valid="0">
        <Description Translatable="1">Format for Article content that is sent to TH.</Description>
        <Group>TH</Group>
        <SubGroup>Core::REST</SubGroup>
        <Setting>
            <TextArea><![CDATA[[% Data.From %] / [% Data.To %]
[% Data.Body %] ]]>
            </TextArea>
        </Setting>
    </ConfigItem>
    <ConfigItem Name="Frontend::Module###AdminTHQueueSettings" Required="0" Valid="1">
        <Description Translatable="1">Queue specific settings for dialog.</Description>
        <Group>TH</Group>
        <SubGroup>Frontend::Admin::ModuleRegistration</SubGroup>
        <Setting>
            <FrontendModuleReg>
                <Group>admin</Group>
                <Description Translatable="1">Queue specific settings for TH.</Description>
                <Title Translatable="1">TH</Title>
                <NavBarName>Admin</NavBarName>
                <NavBarModule>
                    <Module>Kernel::Output::HTML::NavBar::ModuleAdmin</Module>
                    <Name Translatable="1">Queue settings for TH</Name>
                    <Description Translatable="1">Queue specific settings for TH.</Description>
                    <Block>System</Block>
                    <Prio>99103</Prio>
                </NavBarModule>
            </FrontendModuleReg>
        </Setting>
    </ConfigItem>
</otrs_config>
